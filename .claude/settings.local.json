{
  "permissions": {
    "allow": [
      "Bash(npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --no-git)",
      "Bash(npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias \"@/*\")",
      "Bash(npm install)",
      "Bash(npm install:*)",
      "Bash(npm run build:*)",
      "Bash(for file in src/app/{laborers,teams,salary,expenses,contracts,reports,settings}/page.tsx)",
      "Bash(do echo \"export const dynamic = ''''force-dynamic''''\")",
      "Bash(npm run dev:*)",
      "Bash(taskkill:*)",
      "Bash(exit 0)",
      "Bash(PORT=3001 npm run dev:*)",
      "Bash(timeout /t 3 /nobreak)",
      "Bash(dir:*)",
      "Bash(copy:*)",
      "Bash(timeout /t 15 /nobreak)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nInitial commit: Aesta Management App\n\nComplete construction site management application with:\n- Company and site dashboards\n- Attendance tracking and work logs\n- Laborer and team management\n- Contracts and payments tracking\n- Expense and salary management\n- Client payment plans and tracking\n- Construction phases management\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nRefactor client payments to use reusable FileUploader component\n\n- Created new FileUploader component for consistent file upload UI\n- Refactored client-payments page to use FileUploader\n- Removed duplicate file upload logic and validation\n- Improved code reusability and maintainability\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(find:*)",
      "Bash(ls:*)",
      "Bash(grep:*)",
      "Bash(git reset:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run lint:*)",
      "Bash(npx supabase:*)",
      "Bash(code --install-extension:*)",
      "Bash(cat:*)",
      "Bash(node check-db.mjs:*)",
      "Bash(node check-db.js:*)",
      "Bash(npx eslint:*)",
      "Bash(wc:*)",
      "Bash(node scripts/setup-storage-bucket.mjs:*)",
      "Bash(where:*)",
      "Bash(vercel:*)",
      "Bash(timeout /t 60 /nobreak)",
      "Bash(xxd:*)",
      "Bash(npm uninstall:*)",
      "Bash(curl:*)",
      "Bash(cmd /c copy:*)",
      "Bash(if exist .next rmdir /s /q .next)",
      "Bash(tr:*)",
      "Bash(npm ls:*)",
      "Bash(head:*)",
      "Bash(node scripts/reset-engineer-transactions.mjs:*)",
      "Bash(findstr:*)",
      "Bash(git log:*)",
      "Bash(git checkout:*)",
      "Bash(echo:*)",
      "Bash(cd:*)",
      "Bash(cmd /c dir /b \"c:\\Users\\Haribabu\\Documents\\AppsCopilot\\AestaManagementApp\\src\\app\\(main)\\site\\attendance\"\")",
      "Bash(powershell:*)",
      "Bash(node scripts/fix-missing-settlement-expenses.mjs:*)",
      "Bash(if exist \"c:\\Users\\Haribabu\\Documents\\AppsCopilot\\AestaManagementApp\\.next\" rmdir /s /q \"c:\\Users\\Haribabu\\Documents\\AppsCopilot\\AestaManagementApp\\.next\")",
      "Bash(rm:*)",
      "Bash(node scripts/fix-expense-cleared-status.mjs:*)",
      "Bash(node -e \"\nimport { createClient } from ''@supabase/supabase-js'';\nimport { readFileSync } from ''fs'';\nimport { resolve, dirname } from ''path'';\nimport { fileURLToPath } from ''url'';\n\nconst __dirname = dirname(fileURLToPath(import.meta.url));\nconst envPath = resolve(__dirname, ''.env.local'');\nconst envContent = readFileSync(envPath, ''utf-8'');\nenvContent.split(''\\n'').forEach(line => {\n  const trimmed = line.trim();\n  if (trimmed && !trimmed.startsWith(''#'')) {\n    const [key, ...valueParts] = trimmed.split(''='');\n    if (key && valueParts.length > 0) {\n      process.env[key.trim()] = valueParts.join(''='').trim().replace(/^[\"\"'']|[\"\"'']$/g, '''');\n    }\n  }\n});\n\nconst supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n\n// Check expenses with salary settlement in description\nconst { data: salaryExpenses } = await supabase\n  .from(''expenses'')\n  .select(''id, date, amount, description, is_cleared'')\n  .ilike(''description'', ''%Salary%'')\n  .order(''date'', { ascending: false })\n  .limit(10);\n\nconsole.log(''Recent salary-related expenses:'');\nconsole.log(JSON.stringify(salaryExpenses, null, 2));\n\")",
      "Bash(node -e \"\nconst { readFileSync } = require(''fs'');\nconst { resolve } = require(''path'');\nconst { createClient } = require(''@supabase/supabase-js'');\n\nconst envContent = readFileSync(resolve(''.env.local''), ''utf-8'');\nenvContent.split(''\\n'').forEach(line => {\n  const trimmed = line.trim();\n  if (trimmed && !trimmed.startsWith(''#'')) {\n    const eqIdx = trimmed.indexOf(''='');\n    if (eqIdx > 0) {\n      const key = trimmed.substring(0, eqIdx).trim();\n      const val = trimmed.substring(eqIdx + 1).trim().replace(/^[\"\"'']|[\"\"'']$/g, '''');\n      process.env[key] = val;\n    }\n  }\n});\n\nconst supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n\n(async () => {\n  const { data: salaryExpenses } = await supabase\n    .from(''expenses'')\n    .select(''id, date, amount, description, is_cleared'')\n    .ilike(''description'', ''%Salary%'')\n    .order(''date'', { ascending: false })\n    .limit(10);\n\n  console.log(''Recent salary-related expenses:'');\n  console.log(JSON.stringify(salaryExpenses, null, 2));\n})();\n\")",
      "Bash(node scripts/check-expense-status.mjs:*)",
      "Bash(node scripts/check-dec16-expense.mjs:*)",
      "Bash(node scripts/check-data-sync.mjs:*)",
      "Bash(node scripts/check-specific-dates.mjs:*)",
      "Bash(node scripts/delete-orphaned-expenses.mjs:*)",
      "Bash(node:*)",
      "Bash(git push)",
      "Bash(npx tsc --noEmit)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd Paid By and Subcontract columns to expenses and payments pages\n\n- Add always-visible \"Paid By\" and \"Subcontract\" columns to site expenses table\n- Add \"Paid By\" and \"Subcontract\" columns to payments detail panel\n- Add SettlementEditDialog for editing payment mode, subcontract link, proof upload, and notes\n- Add \"Unlinked\" filter option to subcontract dropdown in payments page\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd visible label for subcontract link option in settlement edit dialog\n\n- Add \"Link to Subcontract\" header with LinkIcon for better visibility\n- Subcontract linking only shows for daily laborer records\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git show:*)",
      "Bash(for f in supabase/migrations/*.sql)",
      "Bash(do grep -l \"CREATE POLICY\\\\|ALTER TABLE.*ENABLE ROW\" \"$f\")",
      "Bash(done)",
      "Bash(xargs -I {} sh -c 'grep -l \"\"CREATE POLICY\\\\|ALTER TABLE.*ENABLE ROW\"\" \"\"{}\"\" && echo \"\"$*\"\"')",
      "Bash(fi)",
      "Bash(xargs:*)",
      "Bash(while read commit)",
      "Bash(do git show $commit:supabase/migrations/*.sql)",
      "Bash(npx supabase db push)",
      "Bash(npx supabase db execute:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nMove NotificationBell from sidebar to App bar\n\n- Add NotificationBell to top App bar after Sync Status indicator\n- Remove NotificationBell from sidebar \\(both icon bar and full drawer modes\\)\n- Fix type errors in DateSettlementsEditDialog and settlementService\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npx tsc --noEmit --skipLibCheck)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd contract payment tracking with date, type, and payment history\n\nFeatures:\n- Add actual payment date and payment type \\(salary/advance/other\\) to contract payments\n- Add unique payment reference codes \\(PAY-YYYYMM-NNN\\) for each payment\n- Add PaymentRefDialog to view payment details by clicking ref chips\n- Add Payment History button in Contract Weekly tab with date-wise view\n- Fix \"Payment not found\" bug for old SET-* format references\n- Add edit/delete dialogs for contract payments\n- Add trust_account as payer source option\n\nDatabase:\n- Add payment_type, actual_payment_date, payment_reference columns to labor_payments\n- Add payment_week_allocations table for salary allocation tracking\n- Add settlement_group_id to labor_payments for linking\n- Add generate_payment_reference\\(\\) function\n- Add advance tracking columns and view\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npx supabase db push:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd settlements overview dialog and fix settlement dates\n\n- Create SettlementsOverviewDialog with summary cards, MRT table, and image gallery\n- Update ContractWeeklyPaymentsTab to show clickable ref chips in tooltip\n- Click individual ref chip opens PaymentRefDialog for details\n- Click \"X settlements\" chip opens SettlementsOverviewDialog with overview\n- Add lightbox for full-size payment proof viewing\n- Fix backfilled settlement dates \\(18 Nov showing as 22 Dec issue\\)\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd auto-scroll, back button, and fix payer source display\n\n- Add back button to payments page when navigating from expenses via ref code\n- Add auto-scroll to highlighted row in SalarySettlementTable\n- Add auto-scroll to highlighted row in ContractWeeklyPaymentsTab\n- Add settlementReferences to ContractLaborerPaymentView type\n- Fix DateSettlementsEditDialog to update settlement_groups payer source\n- Fix payer_source NULL display in v_all_expenses view \\(default to Own Money\\)\n- Fix pre-existing type issues in ContractWeeklyPaymentsTab\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nRestore week-wise view as default with toggle for laborer view\n\n- Add viewMode toggle: \"Weeks\" \\(default\\) and \"Laborers\" views\n- Week-wise view shows weeks as primary rows with laborers nested inside\n- Laborer-wise view shows laborers as primary rows with weeks nested inside\n- Both views support status, subcontract, and team filters\n- Both views support highlighting from ref code navigation\n- Add WeekRowData interface and week data processing\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(del \"c:\\\\Users\\\\Haribabu\\\\Documents\\\\AppsCopilot\\\\AestaManagementApp\\\\supabase\\\\migrations\\\\20251223120000_reallocate_contract_payments_waterfall.sql\")",
      "Bash(npx supabase --version)",
      "Bash(del \"c:\\\\Users\\\\Haribabu\\\\Documents\\\\AppsCopilot\\\\AestaManagementApp\\\\supabase\\\\migrations\\\\20251223170000_populate_payment_week_allocations.sql\")",
      "Bash(tail:*)",
      "Bash(npx tsx:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nAdd date-wise settlement tracking with data recovery scripts\n\nFeatures:\n- Enhanced Contract Weekly Tab with date-wise settlement grouping\n- Maestri earnings tracking with configurable margin per day\n- Settlement view/edit/delete dialogs for weekly contract payments\n- Engineer Wallet enhanced with transaction detail/edit/delete dialogs\n- ScreenshotViewer component for in-app proof image viewing\n\nFixes:\n- Fixed fetchSubcontracts paid amount calculation in expenses page\n- Fixed settlement grouping to use work date instead of payment date\n- Restored daily/market settlements with proper subcontract linking\n\nScripts:\n- fix-settlement-grouping.ts: Corrects settlement ref codes per work date\n- link-settlements-to-subcontracts.ts: Links restored settlements\n- restore-daily-settlements.ts: Recreates settlements from attendance data\n- check-db-state.ts: Database state verification utility\n\nMigrations:\n- add_maestri_margin.sql: Adds maestri_margin_per_day to subcontracts\n- date_wise_settlement_fields.sql: Adds settlement_type, week_allocations\n- settlement_wallet_spending_fix.sql: Fixes wallet spending calculations\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nFix Contract Weekly Tab transaction display and add Daily Settlements dashboard\n\nFixes:\n- Contract Weekly Tab now correctly fetches settlement references from\n  settlement_groups table \\(SET-* format\\) instead of labor_payments \\(PAY-*\\)\n- Added Tooltip to Transactions column showing clickable ref codes on hover\n- Fixed getDateWiseSettlements to work without week_allocations field\n  \\(falls back to settlement_date filtering\\)\n- WeekSettlementsDialogV2 now displays restored settlements correctly\n\nNew Features:\n- Added summary dashboard to Daily Settlements tab showing:\n  - Total Salary\n  - Paid amount\n  - Outstanding amount\n  - Payment progress percentage\n\nScripts:\n- fix-settlement-week-allocations.ts: Adds week_allocations JSONB to\n  restored settlements so they appear in the week dialog\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")"
    ],
    "deny": [],
    "ask": []
  }
}
